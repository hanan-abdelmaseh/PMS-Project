"use strict";(self.webpackChunkpms=self.webpackChunkpms||[]).push([[534],{5534:(z,g,i)=>{i.r(g),i.d(g,{ProjectsModule:()=>Q});var d=i(6814),l=i(1896),S=i(7191),e=i(5879),f=i(1355),j=i(6227),b=i(7700),c=i(6223),x=i(2296),p=i(9157),v=i(2032),Z=i(617),m=i(5195),T=i(3365),y=i(5047);function N(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetSearchInput())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}const C=function(){return[5,10,25,100]};function F(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"mat-paginator",12),e.NdJ("page",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.changePage(n))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("length",t.pagination.totalNumberOfRecords)("pageSize",t.pagination.pageSize)("pageSizeOptions",e.DdM(3,C))}}const w=function(){return["./add"]},A=function(){return{view:!1}};let I=(()=>{class o{constructor(t,r,n,a){this._projectService=t,this._helperSerivce=r,this._Router=n,this.dialog=a,this.table={colDefs:[{field:"title",headerName:"Title"},{field:"description",headerName:"Description"},{headerName:"Num tasks",valueGetter:s=>s.task.length},{field:"creationDate",headerName:"Creation date",valueFormatter:s=>new d.uU("en").transform(s,"fullDate")},{field:"modificationDate",headerName:"Modification date",valueFormatter:s=>new d.uU("en").transform(s,"fullDate")}],data:[],operators:[{title:"View",icon:"visibility"},{title:"Edit",icon:"edit_square"},{title:"Delete",icon:"delete"}]},this.pagination={pageSize:10,pageNumber:1,totalNumberOfRecords:0,totalNumberOfPages:0},this.params={title:"",pageSize:this.pagination.pageSize,pageNumber:this.pagination.pageNumber}}ngOnInit(){this.getProjects()}getProjects(){this._projectService.getProjectsByManager(this.params).subscribe({next:t=>{this.table.data=t.data,this.pagination=(({pageSize:r,pageNumber:n,totalNumberOfRecords:a,totalNumberOfPages:s,...P})=>({pageSize:r,pageNumber:n,totalNumberOfRecords:a,totalNumberOfPages:s}))(t)},error:t=>{this._helperSerivce.openSnackBar(this._helperSerivce.getErrorMessage(t))}})}onOperation(t){"View"===t.opInfo?this.viewProject(t.row):"Edit"===t.opInfo&&this.editProject(t.row),"Delete"===t.opInfo&&this.deleteDialog(t.row)}viewProject(t){this._Router.navigate(["/dashboard/manager/projects/view"],{queryParams:{id:t.id,view:!0}})}editProject(t){this._Router.navigate(["/dashboard/manager/projects/edit"],{queryParams:{id:t.id,view:!1}})}deleteProject(t){this._projectService.onDeleteProject(t).subscribe({next:r=>{this._helperSerivce.openSnackBar("Deleted Succesfully")},error:r=>{this._helperSerivce.openSnackBar(this._helperSerivce.getErrorMessage(r))},complete:()=>{this.getProjects()}})}deleteDialog(t){this.dialog.open(S.T,{data:{id:t.id,name:t.title}}).afterClosed().subscribe(n=>{n&&this.deleteProject(n)})}resetSearchInput(){this.params.title="",this.getProjects()}changePage(t){this.params.pageNumber=t.pageIndex+1,this.params.pageSize=t.pageSize,this.getProjects()}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(f.Y),e.Y36(j.W_),e.Y36(l.F0),e.Y36(b.uw))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-projects"]],decls:23,vars:8,consts:[[1,"section-header","withButton"],["role","button",1,"main-btn","text-decoration-none",3,"routerLink","queryParams"],[1,"fa-1x","fa-light","fa-plus","pe-1"],[1,"p-4"],["appearance","outline",1,"w-25"],["mat-icon-button","","matPrefix",""],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"m-0","overflow-x-auto"],[3,"table","operationData"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"]],template:function(r,n){1&r&&(e.TgZ(0,"section")(1,"div")(2,"div",0)(3,"h2"),e._uU(4,"Projects"),e.qZA(),e.TgZ(5,"a",1),e._UZ(6,"i",2),e._uU(7," Add New Project "),e.qZA()(),e.TgZ(8,"div",3)(9,"mat-card")(10,"mat-card-header")(11,"mat-form-field",4)(12,"button",5)(13,"mat-icon"),e._uU(14,"search"),e.qZA()(),e.TgZ(15,"mat-label"),e._uU(16,"Search"),e.qZA(),e.TgZ(17,"input",6),e.NdJ("ngModelChange",function(s){return n.params.title=s})("keyup.enter",function(){return n.getProjects()}),e.qZA(),e.YNc(18,N,3,0,"button",7),e.qZA()(),e.TgZ(19,"mat-card-content")(20,"div",8)(21,"app-table",9),e.NdJ("operationData",function(s){return n.onOperation(s)}),e.qZA(),e.YNc(22,F,1,4,"mat-paginator",10),e.qZA()()()()()()),2&r&&(e.xp6(5),e.Q6J("routerLink",e.DdM(6,w))("queryParams",e.DdM(7,A)),e.xp6(12),e.Q6J("ngModel",n.params.title),e.xp6(1),e.Q6J("ngIf",n.params.title),e.xp6(3),e.Q6J("table",n.table),e.xp6(1),e.Q6J("ngIf",n.table.data.length))},dependencies:[d.O5,l.rH,c.Fj,c.JJ,c.On,x.RK,p.KE,p.hX,p.qo,p.R9,v.Nt,Z.Hw,m.a8,m.dn,m.dk,T.NW,y.a]})}return o})();function J(o,u){1&o&&(e.ynx(0),e._uU(1," * Title is Requierd "),e.BQk())}function D(o,u){if(1&o&&(e.TgZ(0,"mat-hint",12),e.YNc(1,J,2,0,"ng-container",13),e.qZA()),2&o){const t=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.ProjectForm.get("title"))?null:r.getError("required"))}}function M(o,u){1&o&&(e.ynx(0),e._uU(1," * Description is Requierd "),e.BQk())}function U(o,u){if(1&o&&(e.TgZ(0,"mat-hint",12),e.YNc(1,M,2,0,"ng-container",13),e.qZA()),2&o){const t=e.oxw();let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.ProjectForm.get("description"))?null:r.getError("required"))}}function Y(o,u){1&o&&(e.TgZ(0,"button",14),e._uU(1,"Save"),e.qZA())}const _=function(){return["/dashboard/manager/projects"]};let h=(()=>{class o{constructor(t,r,n,a){this._ProjectService=t,this._router=r,this._route=n,this._helperService=a,this.view="false",this.ProjectForm=new c.cw({title:new c.NI("",[c.kI.required]),description:new c.NI("",[c.kI.required])})}ngOnInit(){this._route.queryParams.subscribe(t=>{this.id=t.id,this.view=t.view||!0}),this.id&&this.getProject()}onSubmit(){const t=this.ProjectForm.value;this.ProjectForm.valid&&(this.id?this.onEdit(t):this.onAdd(t))}onAdd(t){this._ProjectService.onAddProject(t).subscribe({next:r=>{this._helperService.openSnackBar("Added Successfully")},error:r=>{this._helperService.openSnackBar(this._helperService.getErrorMessage(r))},complete:()=>{this._router.navigateByUrl("/dashboard/manager/projects")}})}onEdit(t){this._ProjectService.onEditProject(this.id,t).subscribe({next:r=>{this._helperService.openSnackBar("Updated Successfully")},error:r=>{this._helperService.openSnackBar(this._helperService.getErrorMessage(r))},complete:()=>{this._router.navigateByUrl("/dashboard/manager/projects")}})}getProject(){this._ProjectService.getById(this.id).subscribe({next:t=>{this.project=t},error:t=>{this._helperService.openSnackBar(this._helperService.getErrorMessage(t))},complete:()=>{this.ProjectForm.patchValue({title:this.project.title,description:this.project.description})}})}static#e=this.\u0275fac=function(r){return new(r||o)(e.Y36(f.Y),e.Y36(l.F0),e.Y36(l.gz),e.Y36(j.W_))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-project-form"]],decls:25,vars:11,consts:[[1,"section-header"],["role","button",1,"text-decoration-none","text-reset",3,"routerLink"],[1,"fa-1x","fa-light","fa-arrow-left","pe-1"],[1,"p-4",3,"formGroup","ngSubmit"],[1,"p-3"],["appearance","outline",1,"w-100"],["formControlName","title","matInput","","type","text","placeholder","Enter Your Title",3,"readonly"],["class","text-center text-white",4,"ngIf"],["formControlName","description","matInput","","type","text","placeholder","Enter Your Description",3,"readonly","rows"],[1,"d-flex","justify-content-between","align-content-center","px-4","py-1","pb-4"],["role","button",1,"outline-btn","text-decoration-none","px-4",3,"routerLink"],["type","submit","class","main-btn px-5",4,"ngIf"],[1,"text-center","text-white"],[4,"ngIf"],["type","submit",1,"main-btn","px-5"]],template:function(r,n){if(1&r&&(e.TgZ(0,"section")(1,"div")(2,"div",0)(3,"a",1),e._UZ(4,"i",2),e._uU(5," Return Projects "),e.qZA(),e.TgZ(6,"h2"),e._uU(7,"Projects"),e.qZA()(),e.TgZ(8,"form",3),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(9,"mat-card",4)(10,"mat-card-content")(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Title"),e.qZA(),e._UZ(14,"input",6),e.YNc(15,D,2,1,"mat-hint",7),e.qZA(),e.TgZ(16,"mat-form-field",5)(17,"mat-label"),e._uU(18,"Description"),e.qZA(),e._UZ(19,"textarea",8),e.YNc(20,U,2,1,"mat-hint",7),e.qZA()(),e.TgZ(21,"mat-card-actions",9)(22,"a",10),e._uU(23," Cancel "),e.qZA(),e.YNc(24,Y,2,0,"button",11),e.qZA()()()()()),2&r){let a,s;e.xp6(3),e.Q6J("routerLink",e.DdM(9,_)),e.xp6(5),e.Q6J("formGroup",n.ProjectForm),e.xp6(6),e.Q6J("readonly","true"===n.view),e.xp6(1),e.Q6J("ngIf",(null==(a=n.ProjectForm.get("title"))?null:a.errors)&&(null==(a=n.ProjectForm.get("title"))?null:a.touched)),e.xp6(4),e.Q6J("readonly","true"===n.view)("rows",6),e.xp6(1),e.Q6J("ngIf",(null==(s=n.ProjectForm.get("description"))?null:s.errors)&&(null==(s=n.ProjectForm.get("description"))?null:s.touched)),e.xp6(2),e.Q6J("routerLink",e.DdM(10,_)),e.xp6(2),e.Q6J("ngIf","false"===n.view)}},dependencies:[d.O5,l.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.KE,p.hX,p.bx,v.Nt,m.a8,m.hq,m.dn]})}return o})();const B=[{path:"",component:I},{path:"add",component:h},{path:"edit",component:h},{path:"view",component:h}];let q=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(B),l.Bz]})}return o})();var E=i(5153);let Q=(()=>{class o{static#e=this.\u0275fac=function(r){return new(r||o)};static#t=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[d.ez,q,E.m]})}return o})()}}]);